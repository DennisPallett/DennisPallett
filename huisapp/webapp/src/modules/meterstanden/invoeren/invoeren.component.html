<h1>Meterstanden invoeren</h1>

<hr />

<div class="alert alert-danger" role="alert" *ngIf="importError != null">
  Het invoeren is mislukt: {{importError}} ({{importErrorCode}})
</div>

<form [hidden]="submitted" (ngSubmit)="onSubmit()" #invoerenForm="ngForm">
  <div class="form-group">
    <label for="file">Opnamedatum:</label>
    <input class="form-control" required type="date" [(ngModel)]="newMeterstand.opnameDatum" name="opnameDatum" />
  </div>

  <div class="form-group">
    <label for="file">Stand water (m3):</label>
    <input class="form-control" required type="number" [(ngModel)]="newMeterstand.water" name="water" />
  </div>

  <div class="form-group">
    <label for="file">Stand gas (m3):</label>
    <input class="form-control" required type="number" [(ngModel)]="newMeterstand.gas" name="gas" />
  </div>

  <div class="form-group">
    <label for="file">Stand elektra E1 (kWh):</label>
    <input class="form-control" required type="number" [(ngModel)]="newMeterstand.elektraE1" name="elektraE1" />
  </div>

  <div class="form-group">
    <label for="file">Stand elektra E2 (kWh):</label>
    <input class="form-control" type="number" [(ngModel)]="newMeterstand.elektraE2" name="elektraE2" />
  </div>

  <button type="submit" class="btn btn-primary" [disabled]="!invoerenForm.form.valid">Invoeren</button>
</form>


<div *ngIf="importInProgress == true">
  <p>Bezig met importeren van de gekozen bestanden...</p>

  <div class="progress">
    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 75%"></div>
  </div>
</div>

<div *ngIf="importResult != null">
  <form>
    <div class="form-group">
      <label>Import resultaat:</label>
      <div class="form-control">
        <ul style="margin-bottom: 0;">
          <li *ngFor="let file of importResult">
            {{ file.name }}:
            <span class="{{file.success ? 'text-success' : 'text-danger'}}">{{file.success ? 'SUCCESS' : 'FAIL - ' + file.error}}</span>
          </li>
        </ul>
      </div>
    </div>
  </form>
</div>
